<!DOCTYPE html>
<html lang="EN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Aochen SUN">





<title>Analysis of An Online Question Bank | Aochen (Arsen) Sun&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.2"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Aochen (Arsen) Sun</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Aochen (Arsen) Sun</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Analysis of An Online Question Bank</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Aochen SUN</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">September 11, 2023&nbsp;&nbsp;21:33</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Codes-and-Tools/">Codes and Tools</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p><strong>Statement:</strong> The methods described in this article are for learning and communication purposes only.</p>
<p>The school has issued a competition notice calling on students to participate. This competition is organized by a large financial institution in China, and the preliminary competition system is clear: each person has three opportunities to take the online exam, and ultimately ranks according to their highest score. The test papers are all choice questions and provide free practice. Free practice scores are not counted towards the final grade.</p>
<p>It can be determined that each time you enter the practice interface, the system will automatically extract 10 questions from the question bank for practice. After several refreshes, I believed that the total number of question banks was not large because duplicate questions had already appeared within a relatively small number of refreshes. Therefore, my initial idea is that perhaps the question bank can be cracked.</p>
<p>Using the developer tool of Chrome browser, I found a key JavaScript file. Due to limited abilities, I am unable to proceed with subsequent work, but through exploration I can confirm that the idea is correct and feasible. Subsequently, I downloaded and used Fiddler, a free packet capturing tool, to retrieve the exercise page. At this point, the various files became clear, and I effortlessly discovered the JSON file and its URL for this free practice.</p>
<p>The format of the JSON file is as below:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&#123;&quot;id&quot;:1838,&quot;questionTitle&quot;:&quot;Question Content&quot;,&quot;questionType&quot;:1,&quot;questionSolution&quot;:&quot;A&quot;,&quot;etfOptionsDtoList&quot;:[&#123;&quot;id&quot;:7333,&quot;optionTitle&quot;:&quot;Option A&quot;,&quot;optionIndex&quot;:&quot;A&quot;,&quot;questionId&quot;:1838,&quot;createTime&quot;:&quot;May 14, 2021 7:46:25 PM&quot;,&quot;createBy&quot;:&quot;sys&quot;&#125;,&#123;&quot;id&quot;:7334,&quot;optionTitle&quot;:&quot;Option B&quot;,&quot;optionIndex&quot;:&quot;B&quot;,&quot;questionId&quot;:1838,&quot;createTime&quot;:&quot;May 14, 2021 7:46:25 PM&quot;,&quot;createBy&quot;:&quot;sys&quot;&#125;,&#123;&quot;id&quot;:7335,&quot;optionTitle&quot;:&quot;Option C&quot;,&quot;optionIndex&quot;:&quot;C&quot;,&quot;questionId&quot;:1838,&quot;createTime&quot;:&quot;May 14, 2021 7:46:25 PM&quot;,&quot;createBy&quot;:&quot;sys&quot;&#125;,&#123;&quot;id&quot;:7336,&quot;optionTitle&quot;:&quot;Option D&quot;,&quot;optionIndex&quot;:&quot;D&quot;,&quot;questionId&quot;:1838,&quot;createTime&quot;:&quot;May 14, 2021 7:46:25 PM&quot;,&quot;createBy&quot;:&quot;sys&quot;&#125;],&quot;questionStage&quot;:&quot;1&quot;,&quot;createTime&quot;:&quot;May 14, 2021 7:46:25 PM&quot;,&quot;createBy&quot;:&quot;sys&quot;,&quot;extend1&quot;:&quot;1&quot;,&quot;extend2&quot;:&quot;5&quot;,&quot;extend4&quot;:&quot;etf&quot;,&quot;difficult&quot;:2&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Among them, “id” is the question number or option number, “questionTitle” and “optionTitle” are the content of the question and option, respectively, and “questionSolution” is the answer option to the question. I don’t know if there is a way to directly obtain all the question banks, but next I just need to program in familiar computer languages such as Python, repeatedly request the URL, and finally organize and remove duplicates to obtain approximately all the question banks.</p>
<p>However, there is another issue that needs to be addressed when programming crawlers. Because when using the browser to refresh the free practice, the website has already recorded my account and I can directly request the URL. But in a crawler program in Python, the first step is to write an appropriate program to fill in the username and password. More complex is that the website does not have a fixed password, and each login requires a verification code to be sent through the phone number. These obstacles to some extent prevent question banks from being easily exploded.</p>
<p>I did not continue learning how to log in to my account in a crawler program. Without systematic learning, identifying web elements is my weaknesses. My alternative is to write an Tampermonkey script, directly request the URL in Chrome, and download the obtained information locally.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         name</span></span><br><span class="line"><span class="comment">// @namespace    https://aochen-sun.github.io/</span></span><br><span class="line"><span class="comment">// @version      1.0</span></span><br><span class="line"><span class="comment">// @description  Automatically refresh and download the body of the page</span></span><br><span class="line"><span class="comment">// @author       Arsen Sun</span></span><br><span class="line"><span class="comment">// @match        https://1234567.com/1234567</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set refresh interval in milliseconds</span></span><br><span class="line">    <span class="keyword">var</span> refreshInterval = <span class="number">5000</span>; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// Generate unique file names</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">generateFileName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>(); <span class="comment">// Use timestamp as part of file name</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;page_content_&#x27;</span> + timestamp + <span class="string">&#x27;.txt&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Define refresh function</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">refreshPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        location.<span class="title function_">reload</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Define download function</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">downloadContent</span>(<span class="params">content</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([content], &#123; <span class="attr">type</span>: <span class="string">&#x27;text/plain&#x27;</span> &#125;);</span><br><span class="line">        <span class="keyword">var</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line">        <span class="keyword">var</span> fileName = <span class="title function_">generateFileName</span>();</span><br><span class="line">        <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">        a.<span class="property">href</span> = url;</span><br><span class="line">        a.<span class="property">download</span> = fileName;</span><br><span class="line">        a.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span><br><span class="line">        a.<span class="title function_">click</span>();</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(a);</span><br><span class="line">        <span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Regularly refresh the page</span></span><br><span class="line">    <span class="built_in">setInterval</span>(refreshPage, refreshInterval);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Execute when the page load is complete</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// Add a selector for the page content you need to download</span></span><br><span class="line">        <span class="keyword">var</span> contentElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>); <span class="comment">// Example Select the content of the entire page</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (contentElement) &#123;</span><br><span class="line">            <span class="keyword">var</span> content = contentElement.<span class="property">textContent</span>; <span class="comment">// Get page content</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Download page content</span></span><br><span class="line">            <span class="title function_">downloadContent</span>(content);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>This script adds a timestamp to the generate file name function so that the local files have unique file names. In addition, the script downloads all the text on the page, as data cleaning can be done in a more familiar language after the download is completed.</p>
<p>We can efficiently improve our grades with question banks. Of course, if the formal competition and free practice share the same question extracting system (which may indeed be the case), the story narrative can be more straightforward.</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Aochen SUN</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://aochen-sun.github.io/2023/09/11/Analysis%20of%20An%20Online%20Question%20Bank/">https://aochen-sun.github.io/2023/09/11/Analysis%20of%20An%20Online%20Question%20Bank/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2022/12/10/A%20Webpage%20Auto-Refresh%20Tampermonkey%20Script/">A Webpage Auto-Refresh Tampermonkey Script</a>
            
        </section>


    </article>
</div>


    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="//unpkg.com/gitalk/dist/gitalk.css">
<script src="//unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
      var gitalk = new Gitalk({
        clientID: 'bc103ee71c5b3e928f67',
        clientSecret: '645afd2986614e5d049064379c78c8ede2059397',
        repo: 'Aochen-Sun.github.io',
        owner: 'Aochen-Sun',
        admin: 'Aochen-Sun',
        id: md5(location.pathname),      
        labels: 'Gitalk'.split(',').filter(l => l),
        perPage: 10,
        pagerDirection: 'last',
        createIssueManually: true,
        distractionFreeMode: false
      })
      gitalk.render('gitalk-container')
</script>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Aochen SUN | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a> | 
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<span class="site-uv">
    总访客量:
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>&nbsp;


<span class="site-pv">
    总访问量:
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

</span>
    </div>
</footer>

    </div>
</body>

</html>